<!DOCTYPE html>
<html>
<head>
    <title>Category Products</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <div class="header">
        <h1 class="title">Online Shop</h1>
        <div class="cart-button">
            <a class="view-cart-text" href="/cart">View Cart</a>
        </div>
        <form class="search-form" action="/search" method="GET">
            <input class="search-input" type="text" name="query" placeholder="Search products...">
            <button class="search-btn" type="submit">Search</button>
        </form>
    </div>

    <h1 class="category-header">Products in "<%= categoryName %>"</h1>

    <div class="products-grid">
        <% filteredProducts.forEach(product => { %>
            <div class="product-card">
                <div class="product-image">
                    <img src="/images/<%= product.name.toLowerCase().replace(/ /g, '_') %>.jpg" alt="<%= product.name %>">
                </div>
                <h3 class="product-name"><%= product.name %></h3>
                <p class="product-price">$<%= product.price %></p>
                <p class="product-rating">
                    Rating: <%= (product.rating_sum / product.rating_count).toFixed(1) %>/5
                    (<%= product.rating_count %> reviews)
                </p>
                <a href="/categories/product/<%= product.id %>" class="view-product">View Details</a>
            </div>
        <% }); %>
    </div>

    <p><a href="/" class="back-link">Back to Categories</a></p>
</body>
</html>